# Build statuc page using Wyam.io

trigger:
  branches:
    include:
    - master
  paths:
    exclude:
    - build/*
    - README.md
    - .gitignore

variables:
  buildConfiguration: 'Release'

stages:
- stage: Build
  jobs:
  - job: Build
    displayName: Build
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    - task: DotNetCoreInstaller@0
      inputs:
        version: '2.1.300'
    
    - task: DotNetCoreCLI@1
      inputs:
        command: custom
        custom: tool
        arguments: 'install -g Wyam.Tool'
    
    - script: wyam build
      workingDirectory: src
      displayName: 'Build using wyam'
      name: 'WyamBuild'
    
    - publish: $(System.DefaultWorkingDirectory)/src/output
      artifact: BlogContent
      displayName: 'Collect BlogContent artifact'
      name: CollectBlogContentArtifact

# - stage: Deploy
#   dependsOn: Build
#   - job: Deploy
#     displayName: Deploy
#     pool:
#       vmImage: 'ubuntu-latest'
#     steps: